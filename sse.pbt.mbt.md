<!-- aletheia:begin -->
# Property-Based Test Targets for sse

> Auto-generated by Aletheia - MoonBit PBT Tool

## Overview

- **Source**: `sse`
- **Generated**: 2026-01-17
- **Patterns Detected**: 4 (Round-Trip, Invariant, Construction, Boundary)

## Round-Trip Targets

- `ready_state_to_event_state` - Int -> EventState conversion (known values)

## Invariant Targets

- Constants match EventSource specification values
- Default values are non-negative

## Construction Targets

- `default_connection_config` - URL preservation

## Boundary Targets

- Max retries threshold checking

## Notes

- Tests are in `test/sse_test.mbt` using inspect-based assertions
- Tests use property-based approach with multiple fixture values
- FFI functions require JS target (`--target js`)
<!-- aletheia:end -->

---

# Property-Based Tests for SSE

This document describes the property-based tests for the SSE (Server-Sent Events) library.

## Test Coverage

### event_source.mbt

| Test | Property |
|------|----------|
| `prop_ready_state_to_event_state_total` | Total function: all inputs map to valid EventState |
| `prop_ready_state_constants` | Invariant: constants match spec (CONNECTING=0, OPEN=1, CLOSED=2) |

### event.mbt

| Test | Property |
|------|----------|
| `prop_default_config_url_preserved` | Construction: URL is preserved in config |
| `prop_default_config_non_negative` | Invariant: default values are positive |

### connection.mbt

| Test | Property |
|------|----------|
| `prop_max_retries_boundary` | Boundary: max_retries threshold correctly evaluated |

## Running Tests

```bash
moon test --target js
```

## Properties Tested

1. **Total Function**: `ready_state_to_event_state` handles all Int inputs
2. **Round-Trip**: Known states (0,1,2) map correctly to EventState variants
3. **Construction**: URL preserved through `default_connection_config`
4. **Invariant**: Default values (reconnect_interval, max_retries) are positive
5. **Boundary**: Max retry threshold correctly identifies exceeded state
